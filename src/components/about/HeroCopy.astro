---
const { title, description } = Astro.props;
---

<section id="hero" class="section hero flex min-h-screen flex-col justify-center bg-slate-50">
	<div class="mx-auto w-full py-4 lg:py-10">
		<div class="relative flex flex-col items-center justify-center rounded-lg pb-10 pt-20 lg:rounded-2xl">
			<h1 class="text-center font-display text-5xl font-extrabold uppercase text-stone-900 sm:text-7xl md:text-8xl lg:text-9xl">
				{title}
			</h1>
			<p class="mt-8 max-w-3xl text-center font-mono text-stone-600 lg:text-lg">
				{description}
			</p>
		</div>
	</div>
</section>

<style>
	.hero {
		padding-bottom: 0;
		position: relative;
		border-radius: inherit;
		overflow: hidden;
	}
	.hero > div {
		grid-column: 1 / span 12;
	}

	.hero h1 {
		margin: 0;
		position: relative;
		overflow: hidden;
		opacity: 0;
	}

	.hero :global(.split-parent) {
		overflow: hidden;
	}
	.hero :global(.split-child) {
		display: inline-block;
	}
</style>

<script>
	import { gsap } from "gsap";
	import { SplitText } from "gsap/SplitText";

	gsap.registerPlugin(SplitText);

	function initHero() {
		const h1 = document.querySelector(".hero h1") as HTMLElement;
		const p = document.querySelector(".hero p") as HTMLElement;
		if (!h1 || !p) return;

		const childSplit = new SplitText(h1, {
			type: "lines",
			linesClass: "split-child",
		});
		const parentSplit = new SplitText(h1, {
			type: "lines",
			linesClass: "split-parent",
		});

		const tl = gsap.timeline();

		tl.set(h1, { opacity: 1 })
			.from(childSplit.lines, {
				duration: 1.5,
				yPercent: 100,
				ease: "power4",
				stagger: 0.1,
			})
			.from(
				p,
				{
					duration: 1,
					y: 30,
					opacity: 0,
					ease: "power3.out",
				},
				"-=0.5",
			);
	}

	if (document.readyState === "loading") {
		document.addEventListener("DOMContentLoaded", initHero);
	} else {
		initHero();
	}
</script>
