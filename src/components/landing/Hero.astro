---
import LinkBlend from "@components/global/LinkBlend.astro";
import { getLangFromUrl, useTranslations, useTranslatedPath } from "@i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
---

<section id="hero" class="section home-dark-section hero min-h-screen">
	<div class="mx-auto flex h-full flex-col py-4 lg:py-10">
		<div class="relative flex flex-1 flex-col justify-around rounded-lg pb-10 pt-20 lg:rounded-2xl">
			<div class="flex justify-center px-4">
				<h1 class="text-center font-display text-4xl font-extrabold uppercase leading-none text-black sm:text-6xl md:text-8xl lg:text-9xl">
					<span class="block md:inline">{t("hero.title.line1")}</span><span class="hidden md:inline"></span><span class="block md:inline">
						{t("hero.title.line2")}
					</span>
					<span class="rotator-container relative block w-full overflow-visible" style="min-height: 6rem;">
						<span
							class="rotator-word absolute left-1/2 top-4 -translate-x-1/2 text-4xl text-gray-500 opacity-100 sm:text-6xl md:text-7xl lg:text-8xl">
							{t("hero.title.1")}
						</span>
						<span
							class="rotator-word absolute left-1/2 top-4 -translate-x-1/2 text-4xl text-gray-500 opacity-0 sm:text-6xl md:text-7xl lg:text-8xl">
							{t("hero.title.2")}
						</span>
						<span
							class="rotator-word absolute left-1/2 top-4 -translate-x-1/2 text-4xl text-gray-500 opacity-0 sm:text-6xl md:text-7xl lg:text-8xl">
							{t("hero.title.3")}
						</span>
						<span
							class="rotator-word absolute left-1/2 top-4 -translate-x-1/2 text-4xl text-gray-500 opacity-0 sm:text-6xl md:text-7xl lg:text-8xl">
							{t("hero.title.4")}
						</span>
					</span>
				</h1>
			</div>
			<div class="flex flex-col items-center gap-5 text-center lg:gap-10">
				<p class="mt-8 max-w-3xl font-mono lg:text-lg">
					{t("hero.subtitle")}
				</p>
				<div class="flex flex-col items-center justify-center gap-4 sm:flex-row">
					<!-- Phone Consultation CTA -->
					<div class="squircle-bg rounded-lg bg-stone-900" data-cursor-hover data-cursor-parallax>
						<a
							class="flex h-12 w-full min-w-[240px] flex-1 items-center justify-center gap-2 px-6 py-3 text-lg text-slate-200 transition-all hover:text-white sm:w-auto md:font-bold"
							aria-label="Get Free Consultation"
							href="tel:+919945852135">
							<span class="text-xl">ðŸ“ž</span>
							<span>Get Free Consultation</span>
						</a>
					</div>

					<!-- WhatsApp CTA -->
					<div class="squircle-bg rounded-lg bg-stone-900" data-cursor-hover data-cursor-parallax>
						<a
							class="flex h-12 w-full min-w-[240px] flex-1 items-center justify-center gap-2 px-6 py-3 text-lg text-white transition-all hover:bg-stone-700 sm:w-auto md:font-bold"
							aria-label="WhatsApp Us"
							href="https://wa.me/919945852135"
							target="_blank"
							rel="noopener noreferrer">
							<span class="text-xl">ðŸ’¬</span>
							<span>WhatsApp Us</span>
						</a>
					</div>
				</div>

				<small>
					{t("or")}
					<LinkBlend id="go-projects-button" isButton={true}>{t("hero.scroll")}</LinkBlend>
				</small>
			</div>
		</div>
	</div>
</section>

<style>
	.hero {
		padding-bottom: 0;
		position: relative;
		border-radius: inherit;
		overflow: hidden;
	}
	.hero > div {
		grid-column: 1 / span 12;
	}

	/* Rotator animation */
	.rotator-word {
		animation: rotateWord 12s infinite;
		white-space: normal;
		max-width: 90vw;
	}

	@media (min-width: 640px) {
		.rotator-word {
			white-space: nowrap;
		}
	}

	.rotator-word:nth-child(1) {
		animation-delay: 0s;
	}

	.rotator-word:nth-child(2) {
		animation-delay: 3s;
	}

	.rotator-word:nth-child(3) {
		animation-delay: 6s;
	}

	.rotator-word:nth-child(4) {
		animation-delay: 9s;
	}

	@keyframes rotateWord {
		0%,
		25% {
			opacity: 1;
			transform: translate(-50%, 0);
		}
		30%,
		100% {
			opacity: 0;
			transform: translate(-50%, -20px);
		}
	}
</style>

<script>
	import { gsap } from "gsap";
	import { ScrollToPlugin } from "gsap/ScrollToPlugin";

	gsap.registerPlugin(ScrollToPlugin);

	function init() {
		var goProjectsButton = document.getElementById("go-projects-button");
		goProjectsButton?.addEventListener("click", function () {
			gsap.to(window, { duration: 0.5, scrollTo: "#whychoose" });
		});
	}

	document.removeEventListener("DOMContentLoaded", init);
	document.addEventListener("DOMContentLoaded", init);
</script>
